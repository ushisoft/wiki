# 关于规范的解读

## 阿里Java规范

### 超过三个表禁止Join

<https://www.zhihu.com/question/56236190>

主要针对Mysql，主要原因大致：

- 优化器弱

- 执行器弱

	执行器中，有一种`index nested loop join`，是从第一个表读一行，然后在第二个表的索引中查找这个数据，索引是B+树索引，复杂度可以近似认为是nlogn，这就是要保证关联字段有索引的原因。

替代的方案，使用大表，冗余数据。

这点需要结合实际场景考虑，数据量小的时候，按照规范来，数据量大时，只有牺牲一些范式规范及维护难度。

> 既然如此，复杂join就一无是处、不应该在开发中使用吗？当然不是，前面已经说了，这些规则都是互联网开发团队总结出来的，适用于高并发、轻写重读、分布式、业务逻辑简单的情况，甚至对数据的一致性要求都不高，允许脏读（毕竟web是个非实时、无状态的东西）。而对于很多低并发、频繁复杂数据写入、CPU密集而非IO密集、主要业务逻辑通过数据库处理甚至包含大量存储过程、对一致性与完整性要求很高的系统。比如金融啦、财务啦、企业应用之类，复杂join也是不可避免的，不仅要写，还要写好，才能发挥数据库最大的功用。

### 强制使用ThreadPoolExecutor

### CSRF

<http://blog.csdn.net/stpeace/article/details/53512283>